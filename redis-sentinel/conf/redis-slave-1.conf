# 基础配置
port 6379
protected-mode no
dir /data

# 关键网络配置：告诉外界我的外部访问地址是 host.docker.internal:6381
replica-announce-ip host.docker.internal
replica-announce-port 6381

# 初始主从复制配置
# 注意：容器内部互联仍然可以使用 Docker 服务名，但为了统一网络视图，
# 这里推荐让 Slave 也通过 host.docker.internal 绕行宿主机去连 Master，
# 这样能保证 Sentinel 看到的拓扑结构一致。
# 或者是用 service name 也可以，但 announce IP 必须是 host.docker.internal。
# 这里我们演示使用 Docker 内部网络直连 Master（性能更好），但 announce 对外暴露地址。
replicaof redis-master 6379

